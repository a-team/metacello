%html
  %head
    %title Metacello Community Page
    %meta{:charset => "utf-8"}/
    %meta{:"http-equiv" => "X-UA-Compatible", :content => "chrome=1"}/
    %script{:type => "text/javascript", :src =>"http://yandex.st/jquery/1.4.2/jquery.min.js"}
    %script{:type => "text/javascript", :src =>"/javascript/metacello.js"}
    %link{:href =>"/stylesheets/screen.css", :media =>"screen", :rel => "stylesheet", :type => "text/css"}/
    /[if IE]
      %script{:type => "text/javascript", :src =>"http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"}
      :javascript
        CFInstall.check({
          preventPrompt: true,
          onmissing: function() { window.location = "http://www.google.com/chromeframe/eula.html" }
        });
  %body
    #header
      .logo
      .avatar
        -if current_user['mail']
          =gravatar(current_user['mail'])
          %a{:href => "/logout"} Logout
        -else
          %a{:href => "#", :onclick => "show_signup();"} Login/Signup
          %form{:name => "login", :action => "post", :target => "/login"}
            %label{:for => "user[name]"} Username:
            %input{:type => "text", :name => "user[name]"}
            %br
            %label{:for => "user[password]"} Password:
            %input{:type => "password", :name => "user[password]"}
      .search
        %form
          %label{:for => "search"} Search:
          %input{:name => "search"}
    #container
      = yield
